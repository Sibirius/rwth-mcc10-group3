<html>
	<head>
		<title>Upload Videos</title>
	
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<script language="javascript" src="js/jquery-1.4.2.min.js"></script>
		<script language="javascript" src="js/constants.js"></script>
		
		<script>
			var maxUploadId = 0;
			var uploadItems = [];

			var currentlySelectedItem = -1;

			function uploadItemInfo(title, description, tags, file) {				
				this.title = title;
				this.description = description;
				this.tags = tags;
				this.file = file;
			} 			

			function fillForm(uploadData) {
				
			}
			
			function selectItem(upload_id) {				
				// unselect all items
				$(".upload-item").removeClass("selected-item");

				if (upload_id == -1) {
					// empty & disable form
					fillForm(new uploadItemInfo("","","",""));
					$("#upload-form").find(":enabled").attr("disabled","disabled");
					
				} else {
					// select item
					$("[upload-id='"+upload_id+"']").addClass("selected-item");
					//fill form & enable it
					fillForm(uploadItems[""+upload_id]);
					$("#upload-form").find(":disabled").removeAttr("disabled");
				}				

				currentlySelectedItem = upload_id;
			}
			
			function addNewItem() {
				var newItem = $("#templateUploadItem").clone();

				newItem.find(".upload-title").append("new Item");
				newItem.attr("id","");
				newItem.attr("upload-id",maxUploadId); // set unique id
				uploadItems[""+maxUploadId] = new uploadItemInfo("new Item","","","");				

				// set select event
				newItem.attr("onClick","selectItem("+maxUploadId+");");

				//TODO: set right hrefs to function buttons

				newItem.insertBefore("#addNewItem").show();
				selectItem(""+maxUploadId);
				
				maxUploadId++;
			}

			function removeItem(upload_id) {
				// should be always true, depending on the remove interface
				if (upload_id == currentlySelectedItem) {
					selectItem(-1);
				}
				
				uploadItems.remove(""+upload_id);
				$("[upload-id"+upload_id+"]").remove();
			}

			function startUpload() {
				//TODO: actually do something
			}
		
			$(document).ready(function() {
			   $("#templateUploadItem").hide();		
			   selectItem(-1);	  
			});				
		</script>
	</head>
	
	<body>
		<div id="upload-list">
			<div id="addNewItem" onClick="addNewItem();"> + Add + </div>
		</div>
	
		<form id="upload-form" action="http://s3.amazonaws.com/<bucketname>/" enctype="multipart/form-data" method="post">			
			<div>
				Title:<br>
				<input type="text" name="titel" size="40"><br>				
				Description:<br>
				<textarea cols="45" rows="4" name="description"></textarea><br>
				Tags:<br>					
				<input type="text" name="tags" size="40"><br>
				File:<br>
				<input type="file" name="datafile" size="40"><br>
			</div>				
			<div>
				<input type="submit" value="Senden">
			</div>		
		</form>

		<a id="uploadButton" href="#" onClick="startUpload();">Upload</a>
				
		<!-- template, hidden on load -->
		<div id="templateUploadItem" class="upload-item">		
			<a class="upload-title"></a>				
		</div>				
	</body>
</html>

