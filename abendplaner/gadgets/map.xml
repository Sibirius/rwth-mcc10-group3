<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Hello Wave">
    <Require feature="wave" /> 
  </ModulePrefs>
  <Content type="html">
 	<![CDATA[
       <div id="content_div" style="height: 50px;">Test</div>
       <script type="text/javascript">
		
		gadgets.util.registerOnLoadHandler(init);
		
		function init() {
	      if (wave && wave.isInWaveContainer()) {
	        wave.setStateCallback(stateUpdated);
	      }
	    }
	
	    function stateUpdated() {
	      if(!wave.getState().get('count')) {
	        div.innerHTML = "The count is 0."
	      }
	      else {
	        div.innerHTML = "The count is " + wave.getState().get('count');
	      } 
	    }
		
		function buttonClicked() {
	      var value = parseInt(wave.getState().get('count', '0'));
	      wave.getState().submitDelta({'count': value + 1});
	    }
	
	    </script>
	    <input type=button value="Click Me!" id="butCount" onClick="buttonClicked()">
    ]]>
  </Content>
</Module>